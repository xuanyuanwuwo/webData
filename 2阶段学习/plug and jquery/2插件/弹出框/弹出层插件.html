<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			#box{
				width: 300px;
				height: 300px;
				display: none;
				background-color: aquamarine;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<button id="btn">弹框</button>
		<div id="box">
			
		</div>
	</body>
</html>
<script src="../js/jQuery.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	$(()=>{
		$.fn.extend({
			 PopCase:function(){
				 let box = $(this)[0]  //jQuery转换成js
				 let obtn = null;
				 console.log(box)
				 function setPopPosition(){
					 console.log(box)
					 box.style.display = "block"
					 //block必须写前面，因为offset是以block为前提，如果放在后面，则下面的减法，需要点击第二次才能执行
					 box.style.left = window.innerWidth/2-box.offsetWidth/2+"px"
					 box.style.top = window.innerHeight/2-box.offsetHeight/2+"px"
					 setclosebtn()
				 }
				 function setclosebtn(){
				 	obtn = document.createElement("button")
				 	obtn.style.position="absolute"
				 	obtn.style.width = 50+"px"
				 	obtn.style.height = 25+"px"
					obtn.innerHTML = "关闭"
				 	box.appendChild(obtn)
				 	obtn.style.left = box.offsetWidth-obtn.offsetWidth+"px"
				 	closebox()
				 }
				 function closebox(){
				 	// let that = this
				 	obtn.onclick = function(){
				 		box.style.display = 'none'
				 	}
				 }
				 setPopPosition()
			 }
		})
		$("#btn").click(function(){
			$("#box").PopCase()
		})
	})
</script>